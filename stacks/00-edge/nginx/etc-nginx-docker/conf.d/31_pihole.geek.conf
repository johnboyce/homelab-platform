# pihole.geek -> Pi-hole admin UI
# pihole is currently running in network_mode=host (legacy).
# Do not proxy it until it is migrated to a bridge network in homelab-platform.

server {
    listen 80;
    server_name pihole.geek;

    include /etc/nginx/snippets/lan_only.conf;

    # Redirect root â†’ /admin
    location = / {
        return 302 /admin;
    }

    # Pi-hole admin UI
    location /admin/ {
        proxy_pass http://geek-pihole/admin/;
        include /etc/nginx/snippets/proxy_common.conf;
    }

    # Pi-hole API (REQUIRED for login)
    location /api/ {
        proxy_pass http://geek-pihole/api/;
        include /etc/nginx/snippets/proxy_common.conf;
    }
}

